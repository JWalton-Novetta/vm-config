#!/bin/bash
# .bashrc

# If this isn't an interactive prompt don't do anything
#[ -z "$PS1" ] && return

# Source global definitions 
if [ -f /etc/bashrc ]; then
    . /etc/bashrc
fi

# User specific aliases and functions
source $HOME/.env
source ~/bin/.git-completion
source ~/bin/.git-prompt

source /home/waltonj/go/src/github.com/Novetta/pwcop/dev/ares_dev.env



################################################################################
# General EXPORTs
################################################################################
export GOPATH=$HOME/go
export GOROOT=/usr/local/go
export GOBIN=$GOPATH/bin
export NOVETTA_PATH=$HOME/go/src/github.com/Novetta
export KLE_MIGRATE_DIR=$NOVETTA_PATH/KLE/setup
export KLE_UPDATE_CASSANDRA="127.0.0.1:9042"
export USE_LIBRE="true"
export PATH=/home/jwalton/bin:$PATH
export PATH=/usr/lib/node/bin:$PATH
export PATH=/usr/local/go/bin:$PATH
export PATH="/home/waltonj/bin/Sencha/Cmd/6.1.3.42/..:$PATH"
export AUTH_METHOD="digest"
export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin



################################################################################
# ALIAS
################################################################################
alias resource='source ~/.bashrc'
alias cqlsh='cqlsh --no-color'
alias mewmew="cqlsh -k kle_newdatamodel -e 'drop keyspace kle_newdatamodel'; ../../setup/updateDb.sh ; cd ../; go test -run TestCreateSampleData; cd -;"
alias ks='cd $NOVETTA_PATH/KLE/kleserver'



################################################################################
# Nice colorized git prompt for bash
################################################################################
function _git_prompt() {
    local git_status="`git status -unormal 2>&1`"
    if ! [[ "$git_status" =~ Not\ a\ git\ repo ]]; then
        if [[ "$git_status" =~ nothing\ to\ commit ]]; then
            local ansi=42
        elif [[ "$git_status" =~ nothing\ added\ to\ commit\ but\ untracked\ files\ present ]]; then
            local ansi=43
        else
            local ansi=41
        fi
        if [[ "$git_status" =~ On\ branch\ ([^[:space:]]+) ]]; then
            branch=${BASH_REMATCH[1]}
            test "$branch" != master || branch=' '
        else
            # Detached HEAD.  (branch=HEAD is a faster alternative.)
            branch="(`git describe --all --contains --abbrev=4 HEAD 2> /dev/null ||
                echo HEAD`)"
        fi
        echo -n '\[\e[0;37;'"$ansi"';1m\]'"$branch"'\[\e[0m\] '
    fi
}

# RED="\[\033[0;31m\]"
# GREEN="\[\033[0;32m\]"
# LIGHT_GRAY="\[\033[0;37m\]"
# CYAN="\[\033[0;36m\]"
# BLACK="\[\033[0;30m\]" 
# BLUE="\[\033[0;34m\]"         

function _prompt_command() {
    PS1="`_git_prompt`"'[\u \t \[\033[0;34m\]\w\[\033[0;30m\]]\$\[\e[0m\] '
}

#PROMPT_COMMAND=_prompt_command

export PS1='[\u@\h \W$(__git_ps1 " (%s)")]\$ '



alias ares='cd $NOVETTA/pwcop'
alias fms='cd $NOVETTA/fms'
